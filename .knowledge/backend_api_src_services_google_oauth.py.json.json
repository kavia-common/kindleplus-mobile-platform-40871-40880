{"is_source_file": true, "format": "Python", "description": "This Python source file implements functionality for verifying Google OAuth ID tokens, extracting user profile information from the token claims, and creating or retrieving user records in the database based on Google account information.", "external_files": ["google.oauth2.id_token", "google.auth.transport.requests", "sqlalchemy", "src.models.user", "src.services.auth_service"], "external_methods": ["google_id_token.verify_oauth2_token", "google_requests.Request", "select", "Session", "User", "get_password_hash"], "published": ["verify_google_id_token", "get_or_create_user_from_google"], "classes": [{"name": "User", "description": "User model representing user data in the database."}], "methods": [{"name": "Dict[str,Any] verify_google_id_token(id_token: str, audience: str)", "description": "Verifies a Google ID token and returns its claims if valid.", "scope": "", "scopeKind": ""}, {"name": "Tuple[str,bool,str|None,str|None] _extract_profile(claims: Dict[str, Any])", "description": "Extracts email, verification status, name, and avatar URL from Google ID token claims.", "scope": "", "scopeKind": ""}, {"name": "User get_or_create_user_from_google(db: Session, claims: Dict[str, Any])", "description": "Finds an existing user by email or creates a new User record based on Google ID token claims.", "scope": "", "scopeKind": ""}], "calls": ["google.oauth2.id_token.verify_oauth2_token", "google.auth.transport.requests.Request", "select", "db.scalar", "db.add", "db.commit", "db.refresh", "get_password_hash"], "search-terms": ["verify_google_id_token", "get_or_create_user_from_google", "Google ID token", "OAuth2 token verification", "Google user claims", "User creation", "SQLAlchemy"], "state": 2, "file_id": 32, "knowledge_revision": 74, "git_revision": "", "ctags": [{"_type": "tag", "name": "_extract_profile", "path": "/home/kavia/workspace/code-generation/kindleplus-mobile-platform-40871-40880/backend_api/src/services/google_oauth.py", "pattern": "/^def _extract_profile(claims: Dict[str, Any]) -> Tuple[str, bool, str | None, str | None]:$/", "language": "Python", "typeref": "typename:Tuple[str,bool,str|None,str|None]", "kind": "function", "signature": "(claims: Dict[str, Any])"}, {"_type": "tag", "name": "get_or_create_user_from_google", "path": "/home/kavia/workspace/code-generation/kindleplus-mobile-platform-40871-40880/backend_api/src/services/google_oauth.py", "pattern": "/^def get_or_create_user_from_google(db: Session, claims: Dict[str, Any]) -> User:$/", "language": "Python", "typeref": "typename:User", "kind": "function", "signature": "(db: Session, claims: Dict[str, Any])"}, {"_type": "tag", "name": "google_id_token", "path": "/home/kavia/workspace/code-generation/kindleplus-mobile-platform-40871-40880/backend_api/src/services/google_oauth.py", "pattern": "/^from google.oauth2 import id_token as google_id_token$/", "language": "Python", "kind": "unknown", "nameref": "unknown:id_token"}, {"_type": "tag", "name": "google_requests", "path": "/home/kavia/workspace/code-generation/kindleplus-mobile-platform-40871-40880/backend_api/src/services/google_oauth.py", "pattern": "/^from google.auth.transport import requests as google_requests$/", "language": "Python", "kind": "unknown", "nameref": "unknown:requests"}, {"_type": "tag", "name": "verify_google_id_token", "path": "/home/kavia/workspace/code-generation/kindleplus-mobile-platform-40871-40880/backend_api/src/services/google_oauth.py", "pattern": "/^def verify_google_id_token(id_token: str, audience: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(id_token: str, audience: str)"}], "hash": "69d4a44f66cf19ffed165cfc6bcf635c", "format-version": 4, "code-base-name": "backend_api", "filename": "backend_api/src/services/google_oauth.py", "revision_history": [{"74": ""}]}