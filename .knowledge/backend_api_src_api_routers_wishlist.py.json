{"is_source_file": true, "format": "Python", "description": "FastAPI router module for managing user wishlists, including listing, adding, retrieving, and removing wishlist entries with pagination and user authentication.", "external_files": ["src/db/session.py", "src/models/book.py", "src/models/user.py", "src/models/wishlist.py", "src/schemas/wishlist.py", "src/services/auth_service.py", "src/utils/pagination.py"], "external_methods": ["get_db", "get_current_user", "PageMeta.build", "sanitize_pagination", "offset_limit"], "published": ["router"], "classes": [{"name": "WishlistAddRequest", "description": "Request model for adding a book to the wishlist, containing a single field 'book_id'."}], "methods": [{"name": "_query_user_wishlist_base", "description": "Builds a base SQLAlchemy select statement for fetching a user's wishlist with related book and user data preloaded."}, {"name": "list_wishlist", "description": "Endpoint to list the authenticated user's wishlist with pagination."}, {"name": "add_to_wishlist", "description": "Endpoint to add a new book to the authenticated user's wishlist."}, {"name": "get_wishlist_entry", "description": "Endpoint to retrieve a specific wishlist entry by ID for the current user."}, {"name": "remove_from_wishlist", "description": "Endpoint to delete a wishlist entry by ID for the current user."}], "calls": ["select", "selectinload", "db.scalar", "db.get", "db.execute", "db.add", "db.commit", "db.refresh", "db.delete", "WishlistRead.model_validate", "PageMeta.build", "sanitize_pagination", "offset_limit"], "search-terms": ["wishlist", "FastAPI wishlist router", "wishlist CRUD", "wishlist pagination", "wishlist user-specific"], "state": 2, "file_id": 40, "knowledge_revision": 123, "git_revision": "ca509fbf661e2730833baa85bfe12fd7fc01f886", "revision_history": [{"95": ""}, {"108": "ca509fbf661e2730833baa85bfe12fd7fc01f886"}, {"123": "ca509fbf661e2730833baa85bfe12fd7fc01f886"}], "ctags": [], "filename": "backend_api/src/api/routers/wishlist.py", "format-version": 4, "code-base-name": "https://github.com/kavia-common/kindleplus-mobile-platform-40871-40880.git:kavia-main"}