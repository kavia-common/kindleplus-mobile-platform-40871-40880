{"is_source_file": true, "format": "Python", "description": "FastAPI router module for managing reading progress, including listing, retrieving, and upserting reading progress records for books, with user authentication and pagination.", "external_files": ["src/db/session.py", "src/models/book.py", "src/models/reading_progress.py", "src/models/user.py", "src/schemas/reading_progress.py", "src/services/auth_service.py", "src/utils/pagination.py"], "external_methods": ["get_db", "get_current_user", "select", "selectinload", "func.count", "offset_limit", "sanitize_pagination"], "published": ["list_reading_progress", "get_progress_for_book", "upsert_progress_for_book"], "classes": [{"name": "ReadingProgressUpsertRequest", "description": "Pydantic model for creating or updating reading progress."}], "methods": [{"name": "_query_user_progress_base", "description": "Builds a base SQLAlchemy select statement for a user's reading progress with relationships preloaded."}, {"name": "list_reading_progress", "description": "Lists the authenticated user's reading progress with optional filtering and pagination."}, {"name": "get_progress_for_book", "description": "Retrieves reading progress for a specific book for the current user."}, {"name": "upsert_progress_for_book", "description": "Creates or updates reading progress for a specific book and user."}], "calls": ["select", "selectinload", "func.count", "offset_limit", "sanitize_pagination", "db.execute", "db.scalar", "db.get", "db.add", "db.commit", "db.refresh"], "search-terms": ["reading progress", "reading.py", "FastAPI reading router", "pagination", "upsert reading progress"], "state": 2, "file_id": 43, "knowledge_revision": 153, "git_revision": "5e046654ba1542ba7515b52443888823594448fb", "revision_history": [{"101": ""}, {"103": "5e046654ba1542ba7515b52443888823594448fb"}, {"153": "5e046654ba1542ba7515b52443888823594448fb"}], "ctags": [], "filename": "backend_api/src/api/routers/reading.py", "format-version": 4, "code-base-name": "https://github.com/kavia-common/kindleplus-mobile-platform-40871-40880.git:kavia-main"}